{"version":3,"file":"index.mjs","sources":["../../libs/store/index.ts"],"sourcesContent":["import { type Ref, readonly, shallowReadonly } from '@vue/reactivity'\r\n\r\nexport function defineApi<\r\n  S1 extends { [k: string]: object },\r\n  S2 extends { [k: string]: object },\r\n  A1 extends { [k: string]: Function },\r\n  A2 extends { [k: string]: Function }\r\n>(option: { _state?: S1; state?: S2; _action?: A1; action?: A2 }) {\r\n  type ReadonlyStates<T> = {\r\n    readonly [P in keyof T]: T[P] extends Ref\r\n      ? Readonly<Ref<T[P]['value']>>\r\n      : T[P] extends object\r\n      ? Readonly<T[P]>\r\n      : ReadonlyStates<T[P]>\r\n  }\r\n  type ReadonlyActions<T> = {\r\n    readonly [P in keyof T]: T[P] extends Function ? T[P] : never\r\n  }\r\n  const _state = shallowReadonly(option._state || {}) as ReadonlyStates<S1>\r\n  const state = shallowReadonly(option.state || {}) as ReadonlyStates<S2>\r\n  const _action = readonly(option._action || {}) as ReadonlyActions<A1>\r\n  const action = readonly(option.action || {}) as ReadonlyActions<A2>\r\n  return shallowReadonly({\r\n    _state,\r\n    state,\r\n    _action,\r\n    action,\r\n  })\r\n}\r\n\r\nexport {}\r\n"],"names":["defineApi","option","_state","shallowReadonly","state","_action","readonly","action"],"mappings":";AAEO,SAASA,EAKdC,GAAgE;AAWhE,QAAMC,IAASC,EAAgBF,EAAO,UAAU,CAAE,CAAA,GAC5CG,IAAQD,EAAgBF,EAAO,SAAS,CAAE,CAAA,GAC1CI,IAAUC,EAASL,EAAO,WAAW,CAAE,CAAA,GACvCM,IAASD,EAASL,EAAO,UAAU,CAAE,CAAA;AAC3C,SAAOE,EAAgB;AAAA,IACrB,QAAAD;AAAA,IACA,OAAAE;AAAA,IACA,SAAAC;AAAA,IACA,QAAAE;AAAA,EAAA,CACD;AACH;"}